<!--
    Autor: Adrián Arévalo Aguirre
-->
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        DOMOLabo B105
    </title>
  
    <!-- Importo el módulo socket.io que tengo en el proyecto -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery.js"></script>
  
      <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
      <!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<!-- Latest compiled and minified JavaScript -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

</head>

<body>

<!--Tabla de Sensores-->

 <div class="container">
    
    <div class="row marketing">
      <div class="col-lg-12">
        <div class="panel panel-primary" style="width:100%;">
          <div class="panel-heading" style=" background: #D2691E;" >Panel Informacion Sensores B105</div>
          <div class="panel-body">
          <p>Here you can see the general info of the sensors availabe,add, modify and delete sensors of the Domotics system.</p>
          </div>
        </div>
      </div>
    </div>

   <!-- Creo el div donde tendré la tabla de sensores -->
    <div class="table-responsive">
       <table id= "sensorTable" class="table table-bordered table-hover" style="text-align:center;">
        <thead>
            <tr>
                <th class="text-center">Id</th>
                <th class="text-center">Tipos</th>
                <th class="text-center">Localizacion</th>
                <th class="text-center">Bateria</th>
                <th></th>
            </tr>
        </thead>
        <tbody></tbody>
       </table>
    </div>
	
   <form>
        <div class="col-lg-6">
          <div class="form-group">
            <label for="inputId" class="col-lg-3 control-label">Id</label>
              <div class="col-lg-9" style="padding-bottom: 15px;">
                <input type="number" class="form-control" id="inputId" placeholder="Identif." min="1">
              </div>
          </div>
          <div class="form-group">
            <label for="inputLoc" class="col-lg-3 control-label">Localizacion</label>
              <div class="col-lg-9" style="padding-bottom: 15px;">
                <input type="number" class="form-control" id="inputLoc" placeholder="Localiz.">
              </div>
          </div>
      </div>

        <div class="col-lg-6">
          <label class="checkbox-inline">
            <input type="checkbox" id="CheckTemp"> Temp
          </label>
          <label class="checkbox-inline">
            <input type="checkbox" id="CheckPres"> Pres
          </label>
          <label class="checkbox-inline">
            <input type="checkbox" id="CheckLum"> Lum
          </label>
          <label class="checkbox-inline">
            <input type="checkbox" id="CheckBat"> Bat
          </label>
          <label class="checkbox-inline">
            <input type="checkbox" id="CheckCons"> Cons
          </label>
          <label class="checkbox-inline">
            <input type="checkbox" id="CheckAtm"> Atm 
          </label>
          <label class="checkbox-inline">
            <input type="checkbox" id="CheckHum"> Hum 
          </label>

           <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10" style="padding-top: 15px;">
              <button type="submit" class="btn btn-primary">Guardar</button>
              <button type="submit" class="btn btn-default">Reset</button>
            </div>
          </div>
        </div>
  </form>

 </div>    
    
  <!-- Se creara la tabla dinamicamente con Javascript e Interfaces DOM -->
    <script>
     // Creo un WebSocket. 
     var socket = io.connect('http://'+ location.host);
     // console.log(location.host);
     socket.on('SLoad', function (data) {
      //Cuerpo de la tabla
      var tablebody = document.getElementsByTagName("tbody")[0];
      //Creo el HTML del boton edit 
      var button1 =document.createElement('button')
      button1.className = "btn btn-default btn-md";
      var icon1 = document.createElement("span");
      icon1.className ="glyphicon glyphicon-pencil";
      button1.appendChild(icon1);
      button1.onclick = function(){
          //Por implementar
      }
      //Creo el HTML del boton delete 
      var button2 =document.createElement('button')
      button2.className = "btn btn-default btn-md";
      var icon2 = document.createElement("span");
      icon2.className ="glyphicon glyphicon-trash";
      button2.appendChild(icon2);
      button2.onclick = function(){
         var fila = this.parentNode.parentNode.parentNode;
         tablebody.removeChild(fila);
         //socket.emit('deleteSensor')
      }
      // Rellenamos la tabla
        var row = document.createElement("tr");
          for(var j = 0; j<4 ; j++) {
          var cell = document.createElement("td");
          var currenttext = document.createTextNode(data[j]);
          cell.appendChild(currenttext);
          row.appendChild(cell);
          }
          //Inserto los botones delete and edit
          var campo4 = document.createElement("span");
            campo4.appendChild(button1);
            campo4.appendChild(button2);
          var cell =document.createElement("td");
	  cell.appendChild(campo4);
          row.appendChild(cell);  
         tablebody.appendChild(row);
      });
    </script>
  </body>
</html>
